

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Users &mdash; Documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
    <link rel="stylesheet" href="../_static/sphinx_tabs/tabs.css" type="text/css" />
  
    <link rel="stylesheet" href="../_static/sphinx_tabs/semantic-ui-2.2.7/segment.min.css" type="text/css" />
  
    <link rel="stylesheet" href="../_static/sphinx_tabs/semantic-ui-2.2.7/menu.min.css" type="text/css" />
  
    <link rel="stylesheet" href="../_static/sphinx_tabs/semantic-ui-2.2.7/tab.min.css" type="text/css" />
  
    <link rel="stylesheet" href="../_static/navtree.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="Documentation" href="../index.html"/>
        <link rel="up" title="Objects" href="../objects.html"/>
        <link rel="next" title="Integrations" href="../integrations.html"/>
        <link rel="prev" title="User Preferences" href="user_preferences.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Cloud API
          

          
            
            <img src="../_static/logo.png" class="logo" />
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="link caption"><span class="link caption-text"><a class="reference internal" href="../misc.html">Misc</a></span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../misc/change_log.html">Change Log</a></li>
<li class="toctree-l1"><a class="reference internal" href="../misc/object_relation_diagram.html">Object Relation Diagram</a></li>
</ul>
<p class="link caption"><span class="link caption-text"><a class="reference internal" href="../general.html">General</a></span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../general/analytics.html">Analytics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../general/api_tokens.html">API Tokens</a></li>
<li class="toctree-l1"><a class="reference internal" href="../general/authentication.html">Authentication</a></li>
<li class="toctree-l1"><a class="reference internal" href="../general/clearing_field_values.html">Clearing Field Values</a></li>
<li class="toctree-l1"><a class="reference internal" href="../general/device_counts.html">Device Counts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../general/exclude_include_fields.html">Include/Exclude Fields</a></li>
<li class="toctree-l1"><a class="reference internal" href="../general/filtering.html">Filtering</a></li>
<li class="toctree-l1"><a class="reference internal" href="../general/ordering.html">Ordering</a></li>
<li class="toctree-l1"><a class="reference internal" href="../general/meta.html">Meta</a></li>
<li class="toctree-l1"><a class="reference internal" href="../general/meta_groups.html">Meta Groups</a></li>
<li class="toctree-l1"><a class="reference internal" href="../general/pagination.html">Pagination</a></li>
<li class="toctree-l1"><a class="reference internal" href="../general/pubsub.html">PubSub Message Broker</a></li>
<li class="toctree-l1"><a class="reference internal" href="../general/search.html">Search</a></li>
<li class="toctree-l1"><a class="reference internal" href="../general/scope.html">Scope</a></li>
</ul>
<p class="link caption"><span class="link caption-text"><a class="reference internal" href="../objects.html">Objects</a></span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="action_types.html">Action Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="actions.html">Actions</a></li>
<li class="toctree-l1"><a class="reference internal" href="analytics_export.html">Analytics Export</a></li>
<li class="toctree-l1"><a class="reference internal" href="analytics_query.html">Analytics Query</a></li>
<li class="toctree-l1"><a class="reference internal" href="areas.html">Areas</a></li>
<li class="toctree-l1"><a class="reference internal" href="buildings.html">Buildings</a></li>
<li class="toctree-l1"><a class="reference internal" href="connected_products.html">Connected Products</a></li>
<li class="toctree-l1"><a class="reference internal" href="currency.html">Currency</a></li>
<li class="toctree-l1"><a class="reference internal" href="customers.html">Customers</a></li>
<li class="toctree-l1"><a class="reference internal" href="dashboards.html">Dashboards</a></li>
<li class="toctree-l1"><a class="reference internal" href="devices.html">Devices</a></li>
<li class="toctree-l1"><a class="reference internal" href="fault_alarms.html">Fault Alarms</a></li>
<li class="toctree-l1"><a class="reference internal" href="local_rules.html">Local Rules</a></li>
<li class="toctree-l1"><a class="reference internal" href="locations.html">Locations</a></li>
<li class="toctree-l1"><a class="reference internal" href="partners.html">Partners</a></li>
<li class="toctree-l1"><a class="reference internal" href="product_files.html">Product Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="product_types.html">Product Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="products.html">Products</a></li>
<li class="toctree-l1"><a class="reference internal" href="rules_v2.html">Rules V2</a></li>
<li class="toctree-l1"><a class="reference internal" href="rule_groups.html">Rule Groups</a></li>
<li class="toctree-l1"><a class="reference internal" href="scenes.html">Scenes</a></li>
<li class="toctree-l1"><a class="reference internal" href="schedules.html">Schedules</a></li>
<li class="toctree-l1"><a class="reference internal" href="spaces.html">Spaces</a></li>
<li class="toctree-l1"><a class="reference internal" href="timezones.html">Timezones</a></li>
<li class="toctree-l1"><a class="reference internal" href="user_features.html">User Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="user_groups.html">User Groups</a></li>
<li class="toctree-l1"><a class="reference internal" href="user_preferences.html">User Preferences</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Users</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#description">Description</a></li>
<li class="toctree-l2"><a class="reference internal" href="#data-model">Data Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="#api-endpoints">API Endpoints</a></li>
<li class="toctree-l2"><a class="reference internal" href="#username-change-process">Username Change Process</a></li>
<li class="toctree-l2"><a class="reference internal" href="#password-recovery-processes">Password Recovery Processes</a></li>
<li class="toctree-l2"><a class="reference internal" href="#two-factor-authentication">Two-Factor Authentication</a></li>
</ul>
</li>
</ul>
<p class="link caption"><span class="link caption-text"><a class="reference internal" href="../integrations.html">Integrations</a></span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../integrations/als2lux.html">Als-to-Lux Correlation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../integrations/external_sensor.html">External Sensors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../integrations/gateway_lite.html">Gateway Lite</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Cloud API</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../objects.html">Objects</a> &raquo;</li>
        
      <li>Users</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/objects/users.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="users">
<span id="objects-users"></span><h1><a class="toc-backref" href="#id1">Users</a><a class="headerlink" href="#users" title="Permalink to this headline">¶</a></h1>
<div class="contents topic" id="quick-links">
<p class="topic-title first">Quick Links</p>
<ul class="simple">
<li><a class="reference internal" href="#users" id="id1">Users</a><ul>
<li><a class="reference internal" href="#description" id="id2">Description</a></li>
<li><a class="reference internal" href="#data-model" id="id3">Data Model</a><ul>
<li><a class="reference internal" href="#complex-constraints" id="id4">Complex Constraints</a></li>
<li><a class="reference internal" href="#account-status-definitions" id="id5">Account Status Definitions</a></li>
</ul>
</li>
<li><a class="reference internal" href="#api-endpoints" id="id6">API Endpoints</a><ul>
<li><a class="reference internal" href="#create-a-user" id="id7">Create a User</a></li>
<li><a class="reference internal" href="#list-users" id="id8">List Users</a></li>
<li><a class="reference internal" href="#update-a-user" id="id9">Update a User</a></li>
<li><a class="reference internal" href="#partially-update-a-user" id="id10">Partially Update a User</a></li>
<li><a class="reference internal" href="#retrieve-a-user" id="id11">Retrieve a User</a></li>
<li><a class="reference internal" href="#delete-a-user" id="id12">Delete a User</a></li>
<li><a class="reference internal" href="#activate-a-user" id="id13">Activate a User</a></li>
<li><a class="reference internal" href="#deactivating-a-user" id="id14">Deactivating a User</a></li>
<li><a class="reference internal" href="#registering-a-user" id="id15">Registering a User</a></li>
<li><a class="reference internal" href="#resend-user-invitation" id="id16">Resend User Invitation</a></li>
<li><a class="reference internal" href="#retrieve-current-user" id="id17">Retrieve Current User</a></li>
<li><a class="reference internal" href="#update-current-user" id="id18">Update Current User</a></li>
<li><a class="reference internal" href="#retrieve-user-permissions" id="id19">Retrieve User Permissions</a></li>
<li><a class="reference internal" href="#retrieve-user-preferences" id="id20">Retrieve User Preferences</a></li>
</ul>
</li>
<li><a class="reference internal" href="#username-change-process" id="id21">Username Change Process</a><ul>
<li><a class="reference internal" href="#verify-a-username-email-change" id="id22">Verify a username/email change</a></li>
</ul>
</li>
<li><a class="reference internal" href="#password-recovery-processes" id="id23">Password Recovery Processes</a><ul>
<li><a class="reference internal" href="#request-a-password-change" id="id24">Request a password change</a></li>
<li><a class="reference internal" href="#changing-the-password" id="id25">Changing the password</a></li>
</ul>
</li>
<li><a class="reference internal" href="#two-factor-authentication" id="id26">Two-Factor Authentication</a><ul>
<li><a class="reference internal" href="#two-factor-authentication-setup" id="id27">Two-Factor Authentication Setup</a></li>
<li><a class="reference internal" href="#verify-two-factor-authentication" id="id28">Verify Two-Factor Authentication</a></li>
<li><a class="reference internal" href="#two-factor-authentication-details" id="id29">Two-Factor Authentication Details</a></li>
<li><a class="reference internal" href="#disable-two-factor-authentication" id="id30">Disable Two-Factor Authentication</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="description">
<h2><a class="toc-backref" href="#id2">Description</a><a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>Users are of various account types and can interact with the system. They may be assigned
<a class="reference internal" href="user_groups.html#objects-user-groups"><span class="std std-ref">User Groups</span></a> to provide varying levels of access to resources
in the system.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For API token documentation, please see <a class="reference internal" href="../general/api_tokens.html#general-api-tokens"><span class="std std-ref">API Tokens</span></a>.</p>
</div>
</div>
<div class="section" id="data-model">
<h2><a class="toc-backref" href="#id3">Data Model</a><a class="headerlink" href="#data-model" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="20%" />
<col width="70%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Key</th>
<th class="head">Datatype</th>
<th class="head">Notes</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>id</td>
<td>ref</td>
<td>read-only</td>
</tr>
<tr class="row-odd"><td>created</td>
<td>datetime</td>
<td>read-only</td>
</tr>
<tr class="row-even"><td>modified</td>
<td>datetime</td>
<td>read-only</td>
</tr>
<tr class="row-odd"><td>username</td>
<td>string</td>
<td>required</td>
</tr>
<tr class="row-even"><td>password</td>
<td>string</td>
<td>required, write-only, <a class="reference internal" href="#users-complex-constraints"><span class="std std-ref">Complex Constraints</span></a></td>
</tr>
<tr class="row-odd"><td>account_type</td>
<td>enum</td>
<td>required, options=[gooee, partner, customer]</td>
</tr>
<tr class="row-even"><td>customer</td>
<td><a class="reference internal" href="customers.html#objects-customers"><span class="std std-ref">ref</span></a></td>
<td><a class="reference internal" href="#users-complex-constraints"><span class="std std-ref">Complex Constraints</span></a></td>
</tr>
<tr class="row-odd"><td>partner</td>
<td><a class="reference internal" href="partners.html#objects-partners"><span class="std std-ref">ref</span></a></td>
<td><a class="reference internal" href="#users-complex-constraints"><span class="std std-ref">Complex Constraints</span></a></td>
</tr>
<tr class="row-even"><td>first_name</td>
<td>string</td>
<td>max_length=30</td>
</tr>
<tr class="row-odd"><td>last_name</td>
<td>string</td>
<td>max_length=30</td>
</tr>
<tr class="row-even"><td>account_status</td>
<td>enum</td>
<td>read-only, default=inactive, options=[active, inactive, pending, expired, transfer], See <a class="reference internal" href="#users-account-status-definitions"><span class="std std-ref">Account Status Definitions</span></a>.</td>
</tr>
<tr class="row-odd"><td>account_status_updated</td>
<td>datetime</td>
<td>read-only</td>
</tr>
<tr class="row-even"><td>buildings</td>
<td>array(<a class="reference internal" href="buildings.html#objects-buildings"><span class="std std-ref">ref</span></a>)</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>user_groups</td>
<td>array(<a class="reference internal" href="user_groups.html#objects-user-groups"><span class="std std-ref">ref</span></a>)</td>
<td>max_length=5</td>
</tr>
<tr class="row-even"><td>phone_number</td>
<td>string</td>
<td>max_length=20</td>
</tr>
<tr class="row-odd"><td>avatar</td>
<td>base64_image</td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td>customer_scopes</td>
<td>array(<a class="reference internal" href="customers.html#objects-customers"><span class="std std-ref">ref</span></a>)</td>
<td>see <a class="reference internal" href="../general/scope.html#general-scope"><span class="std std-ref">Scope</span></a></td>
</tr>
<tr class="row-odd"><td>partner_scopes</td>
<td>array(<a class="reference internal" href="partners.html#objects-partners"><span class="std std-ref">ref</span></a>)</td>
<td>see <a class="reference internal" href="../general/scope.html#general-scope"><span class="std std-ref">Scope</span></a></td>
</tr>
<tr class="row-even"><td>tags</td>
<td>array(str)</td>
<td>max_length=50 per tag</td>
</tr>
</tbody>
</table>
<div class="section" id="complex-constraints">
<span id="users-complex-constraints"></span><h3><a class="toc-backref" href="#id4">Complex Constraints</a><a class="headerlink" href="#complex-constraints" title="Permalink to this headline">¶</a></h3>
<p>If <em>account_type=customer</em>, <em>customer</em> is required.</p>
<p>If <em>account_type=partner</em>, <em>partner</em> is required.</p>
<p>Only <em>partner</em> or <em>customer</em> may be provided.</p>
<p>Passwords are validated against the following constraints:</p>
<ul class="simple">
<li>at least 8 characters long</li>
<li>include at least 1 lowercase letter</li>
<li>include at least 1 uppercase letter</li>
<li>include at least 1 number</li>
<li>Special characters allowed: !&#8221;#$%&amp;&#8217;()*+,-./:;&lt;=&gt;?&#64;[]^_`{|}~</li>
</ul>
<p>A user can be associated to up to 5 ref:<cite>User Groups &lt;objects_user_groups&gt;</cite>.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
<div class="section" id="account-status-definitions">
<span id="users-account-status-definitions"></span><h3><a class="toc-backref" href="#id5">Account Status Definitions</a><a class="headerlink" href="#account-status-definitions" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">active</span></code> - The account has been activated and the User is fully operational.</li>
<li><code class="docutils literal"><span class="pre">expired</span></code> - An account activation was initiated, but the activation token expired before it was used.</li>
<li><code class="docutils literal"><span class="pre">inactive</span></code> - The account has been deactivated by an Administrator.</li>
<li><code class="docutils literal"><span class="pre">pending</span></code> - The account exists and requires activation.</li>
<li><code class="docutils literal"><span class="pre">transfer</span></code> - The account is being transferred to a new email address.</li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
<div class="section" id="api-endpoints">
<h2><a class="toc-backref" href="#id6">API Endpoints</a><a class="headerlink" href="#api-endpoints" title="Permalink to this headline">¶</a></h2>
<div class="section" id="create-a-user">
<h3><a class="toc-backref" href="#id7">Create a User</a><a class="headerlink" href="#create-a-user" title="Permalink to this headline">¶</a></h3>
<p>When a user is created it will be inactive by default and cannot login into the system. An email
will be sent to the user containing an activation key or a link to reset the password. A <strong>portal</strong> url parameter
needs to be provided and set to <cite>true</cite> when a user is created from the portal in order to render different
emails depending if the user comes from the portal or is an API user. The user should
<a class="reference internal" href="#users-registration"><span class="std std-ref">activate the account</span></a> to setup a password and provide personal information.
The url sent will look like:</p>
<p><code class="docutils literal"><span class="pre">https://portal.gooee.com/#/user-registration/{activation_key}/{first_name}/{last_name}/{username}/</span></code></p>
<dl class="post">
<dt id="post--users-">
<code class="descname">POST </code><code class="descname">/users/</code><a class="headerlink" href="#post--users-" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">Query Parameters:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><ul class="first simple">
<li><strong>mobile</strong> &#8211; one of <code class="docutils literal"><span class="pre">true</span></code>, <code class="docutils literal"><span class="pre">false</span></code> (default if not provided) indicating if the request
is made from a mobile app.</li>
<li><strong>scheme</strong> &#8211; optional url scheme that can be handled by a mobile app.</li>
<li><strong>portal</strong> &#8211; one of <code class="docutils literal"><span class="pre">true</span></code>, <code class="docutils literal"><span class="pre">false</span></code> (default if not provided).</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Status Codes:</th><td class="field-body"><ul class="first last simple">
<li><a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.2">201 Created</a> &#8211; </li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p>Once a user can login into the system, in order to be able to access endpoints of the building
hierarchy, the user must have a <a class="reference internal" href="user_groups.html#objects-user-groups"><span class="std std-ref">User Groups</span></a> assigned with permission_sets
that grants him access.</p>
</div>
<div class="section" id="list-users">
<h3><a class="toc-backref" href="#id8">List Users</a><a class="headerlink" href="#list-users" title="Permalink to this headline">¶</a></h3>
<dl class="get">
<dt id="get--users-">
<code class="descname">GET </code><code class="descname">/users/</code><a class="headerlink" href="#get--users-" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Status Codes:</th><td class="field-body"><ul class="first last simple">
<li><a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.1">200 OK</a> &#8211; </li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="update-a-user">
<h3><a class="toc-backref" href="#id9">Update a User</a><a class="headerlink" href="#update-a-user" title="Permalink to this headline">¶</a></h3>
<dl class="put">
<dt id="put--users-(id)-">
<code class="descname">PUT </code><code class="descname">/users/</code><span class="sig-paren">(</span><em>id</em><span class="sig-paren">)</span><code class="descname">/</code><a class="headerlink" href="#put--users-(id)-" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Status Codes:</th><td class="field-body"><ul class="first last simple">
<li><a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.1">200 OK</a> &#8211; </li>
<li><a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.3">202 Accepted</a> &#8211; Changes were made to a user&#8217;s <code class="docutils literal"><span class="pre">username</span></code> field. <code class="docutils literal"><span class="pre">username</span></code> field update is pending email verification. <code class="docutils literal"><span class="pre">username</span></code> changes only available to Gooee Admins.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="partially-update-a-user">
<h3><a class="toc-backref" href="#id10">Partially Update a User</a><a class="headerlink" href="#partially-update-a-user" title="Permalink to this headline">¶</a></h3>
<dl class="patch">
<dt id="patch--users-(id)-">
<code class="descname">PATCH </code><code class="descname">/users/</code><span class="sig-paren">(</span><em>id</em><span class="sig-paren">)</span><code class="descname">/</code><a class="headerlink" href="#patch--users-(id)-" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Status Codes:</th><td class="field-body"><ul class="first last simple">
<li><a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.1">200 OK</a> &#8211; </li>
<li><a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.3">202 Accepted</a> &#8211; Changes were made to a user&#8217;s <code class="docutils literal"><span class="pre">username</span></code> field. <code class="docutils literal"><span class="pre">username</span></code> field update is pending email verification. <code class="docutils literal"><span class="pre">username</span></code> changes only available to Gooee Admins.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="retrieve-a-user">
<h3><a class="toc-backref" href="#id11">Retrieve a User</a><a class="headerlink" href="#retrieve-a-user" title="Permalink to this headline">¶</a></h3>
<dl class="get">
<dt id="get--users-(id)-">
<code class="descname">GET </code><code class="descname">/users/</code><span class="sig-paren">(</span><em>id</em><span class="sig-paren">)</span><code class="descname">/</code><a class="headerlink" href="#get--users-(id)-" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Status Codes:</th><td class="field-body"><ul class="first last simple">
<li><a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.1">200 OK</a> &#8211; </li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="delete-a-user">
<h3><a class="toc-backref" href="#id12">Delete a User</a><a class="headerlink" href="#delete-a-user" title="Permalink to this headline">¶</a></h3>
<dl class="delete">
<dt id="delete--users-(id)-">
<code class="descname">DELETE </code><code class="descname">/users/</code><span class="sig-paren">(</span><em>id</em><span class="sig-paren">)</span><code class="descname">/</code><a class="headerlink" href="#delete--users-(id)-" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Status Codes:</th><td class="field-body"><ul class="first last simple">
<li><a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.5">204 No Content</a> &#8211; </li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="activate-a-user">
<h3><a class="toc-backref" href="#id13">Activate a User</a><a class="headerlink" href="#activate-a-user" title="Permalink to this headline">¶</a></h3>
<dl class="post">
<dt id="post--users-(id)-activate-">
<code class="descname">POST </code><code class="descname">/users/</code><span class="sig-paren">(</span><em>id</em><span class="sig-paren">)</span><code class="descname">/activate/</code><a class="headerlink" href="#post--users-(id)-activate-" title="Permalink to this definition">¶</a></dt>
<dd><p>Activate User account. Can only be performed by Gooee Users or Users having the required
permission sets.  Requires the User to have a first and last name.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Status Codes:</th><td class="field-body"><ul class="first last simple">
<li><a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.1">200 OK</a> &#8211; User account activated successfully.</li>
<li><a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.1">400 Bad Request</a> &#8211; Parameters are missing or incorrect.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="deactivating-a-user">
<span id="users-info"></span><h3><a class="toc-backref" href="#id14">Deactivating a User</a><a class="headerlink" href="#deactivating-a-user" title="Permalink to this headline">¶</a></h3>
<dl class="post">
<dt id="post--users-(id)-deactivate-">
<code class="descname">POST </code><code class="descname">/users/</code><span class="sig-paren">(</span><em>id</em><span class="sig-paren">)</span><code class="descname">/deactivate/</code><a class="headerlink" href="#post--users-(id)-deactivate-" title="Permalink to this definition">¶</a></dt>
<dd><p>Deactivate User account. Can only be performed by Gooee Users or users having the required permission sets.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Status Codes:</th><td class="field-body"><ul class="first last simple">
<li><a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.1">200 OK</a> &#8211; User account deactivated successfully. Login is disabled.</li>
<li><a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.1">400 Bad Request</a> &#8211; Parameters are missing or incorrect.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="registering-a-user">
<span id="users-registration"></span><h3><a class="toc-backref" href="#id15">Registering a User</a><a class="headerlink" href="#registering-a-user" title="Permalink to this headline">¶</a></h3>
<dl class="post">
<dt id="post--users-register-">
<code class="descname">POST </code><code class="descname">/users/register/</code><a class="headerlink" href="#post--users-register-" title="Permalink to this definition">¶</a></dt>
<dd><p>Finish user account setup by using activation key sent by email</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">JSON Parameters:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><ul class="first simple">
<li><strong>activation_key</strong> (<em>string</em>) &#8211; the activation key sent to the user</li>
<li><strong>first_name</strong> (<em>string</em>) &#8211; user&#8217;s first name (required)</li>
<li><strong>last_name</strong> (<em>string</em>) &#8211; user&#8217;s last name (required)</li>
<li><strong>phone_number</strong> (<em>string</em>) &#8211; user&#8217;s phone number (not required)</li>
<li><strong>avatar</strong> (<em>base64_image</em>) &#8211; user&#8217;s picture (not required)</li>
<li><strong>password</strong> (<em>string</em>) &#8211; set a password for the user</li>
<li><strong>password_confirm</strong> (<em>string</em>) &#8211; confirm user&#8217;s password</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Status Codes:</th><td class="field-body"><ul class="first last simple">
<li><a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.2">201 Created</a> &#8211; user was activated successfully</li>
<li><a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.1">400 Bad Request</a> &#8211; parameters are missing or incorrect</li>
<li><a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.11">410 Gone</a> &#8211; activation key has expired</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><strong>Example request</strong>:</p>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">POST</span> <span class="nn">/users/register/</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">api.gooee.io</span>
<span class="na">Accept</span><span class="o">:</span> <span class="l">application/json</span>

{
  &quot;activation_key&quot;: &quot;3878732iydjdahdajhd&quot;,
  &quot;first_name&quot;: &quot;Bob&quot;,
  &quot;last_name&quot;: &quot;Bobsen&quot;,
  &quot;phone_number&quot;: &quot;18005467&quot;,
  &quot;avatar&quot;: &quot;image&quot;,
  &quot;password&quot;: &quot;somepassword&quot;,
  &quot;password_confirm&quot;: &quot;somepassword&quot;
}
</pre></div>
</div>
<p><strong>Example response</strong>:</p>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">201</span> <span class="ne">CREATED</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">{</span>
    <span class="nt">&quot;detail&quot;</span><span class="p">:</span> <span class="s2">&quot;User registered successfully. You can login now.&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="resend-user-invitation">
<span id="users-resend-invitation"></span><h3><a class="toc-backref" href="#id16">Resend User Invitation</a><a class="headerlink" href="#resend-user-invitation" title="Permalink to this headline">¶</a></h3>
<dl class="post">
<dt id="post--users-(id)-resend_invitation-">
<code class="descname">POST </code><code class="descname">/users/</code><span class="sig-paren">(</span><em>id</em><span class="sig-paren">)</span><code class="descname">/resend_invitation/</code><a class="headerlink" href="#post--users-(id)-resend_invitation-" title="Permalink to this definition">¶</a></dt>
<dd><p>Resend a user invitation in case never was received on user creation.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">Query Parameters:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><ul class="first simple">
<li><strong>mobile</strong> &#8211; one of <code class="docutils literal"><span class="pre">true</span></code>, <code class="docutils literal"><span class="pre">false</span></code> (default if not provided) indicating if the request
is made from a mobile app.</li>
<li><strong>scheme</strong> &#8211; optional url scheme that can be handled by a mobile app.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Status Codes:</th><td class="field-body"><ul class="first last simple">
<li><a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.2">201 Created</a> &#8211; a new invitation was sent to the user.</li>
<li><a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.1">400 Bad Request</a> &#8211; Malformed request.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><strong>Example request</strong>:</p>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">POST</span> <span class="nn">/users/8238328383/resend_invitation/</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">api.gooee.io</span>
<span class="na">Accept</span><span class="o">:</span> <span class="l">application/json</span>
</pre></div>
</div>
<p><strong>Example response</strong>:</p>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">201</span> <span class="ne">CREATED</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">{</span>
    <span class="nt">&quot;detail&quot;</span><span class="p">:</span> <span class="s2">&quot;A new invitation was sent to the user.&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="retrieve-current-user">
<span id="users-retrieve-current-user"></span><h3><a class="toc-backref" href="#id17">Retrieve Current User</a><a class="headerlink" href="#retrieve-current-user" title="Permalink to this headline">¶</a></h3>
<dl class="get">
<dt id="get--me">
<code class="descname">GET </code><code class="descname">/me</code><a class="headerlink" href="#get--me" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Status Codes:</th><td class="field-body"><ul class="first last simple">
<li><a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.1">200 OK</a> &#8211; Everything went fine.</li>
<li><a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.2">401 Unauthorized</a> &#8211; User is not authenticated.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><strong>Example Response</strong></p>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">{</span>
    <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;84517997-741e-44c8-9908-cb0eda822fc0&quot;</span><span class="p">,</span>
    <span class="nt">&quot;created&quot;</span><span class="p">:</span> <span class="s2">&quot;2017-01-30T21:20:19.222883Z&quot;</span><span class="p">,</span>
    <span class="nt">&quot;modified&quot;</span><span class="p">:</span> <span class="s2">&quot;2017-01-31T21:10:19.322879Z&quot;</span><span class="p">,</span>
    <span class="nt">&quot;username&quot;</span><span class="p">:</span> <span class="s2">&quot;user@email.com&quot;</span><span class="p">,</span>
    <span class="nt">&quot;account_type&quot;</span><span class="p">:</span> <span class="s2">&quot;partner&quot;</span><span class="p">,</span>
    <span class="nt">&quot;first_name&quot;</span><span class="p">:</span> <span class="s2">&quot;Test&quot;</span><span class="p">,</span>
    <span class="nt">&quot;last_name&quot;</span><span class="p">:</span> <span class="s2">&quot;User&quot;</span><span class="p">,</span>
    <span class="nt">&quot;last_login&quot;</span><span class="p">:</span> <span class="s2">&quot;2017-01-31T21:10:19.317405Z&quot;</span><span class="p">,</span>
    <span class="nt">&quot;account_status&quot;</span><span class="p">:</span> <span class="s2">&quot;active&quot;</span><span class="p">,</span>
    <span class="nt">&quot;account_status_updated&quot;</span><span class="p">:</span> <span class="s2">&quot;2017-01-30T21:20:19.359702Z&quot;</span><span class="p">,</span>
    <span class="nt">&quot;user_groups&quot;</span><span class="p">:</span> <span class="p">[],</span>
    <span class="nt">&quot;partner&quot;</span><span class="p">:</span> <span class="s2">&quot;12345997-741e-44c8-9908-c23328822e01&quot;</span><span class="p">,</span>
    <span class="nt">&quot;customer&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nt">&quot;buildings&quot;</span><span class="p">:</span> <span class="p">[],</span>
    <span class="nt">&quot;phone_number&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nt">&quot;avatar&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nt">&quot;tags&quot;</span><span class="p">:</span> <span class="p">[],</span>
<span class="p">}</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="update-current-user">
<span id="users-update-current-user"></span><h3><a class="toc-backref" href="#id18">Update Current User</a><a class="headerlink" href="#update-current-user" title="Permalink to this headline">¶</a></h3>
<p>A User can update its own User resource using the <code class="docutils literal"><span class="pre">/me</span></code> endpoint. The API is identical to updating
another User with <code class="docutils literal"><span class="pre">/users/(id)</span></code> except that certain fields are read-only:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">account_type</span></code></li>
<li><code class="docutils literal"><span class="pre">is_api_user</span></code></li>
<li><code class="docutils literal"><span class="pre">buildings</span></code></li>
<li><code class="docutils literal"><span class="pre">username</span></code></li>
<li><code class="docutils literal"><span class="pre">partner</span></code></li>
<li><code class="docutils literal"><span class="pre">customer</span></code></li>
<li><code class="docutils literal"><span class="pre">customer_scopes</span></code></li>
<li><code class="docutils literal"><span class="pre">partner_scopes</span></code></li>
<li><code class="docutils literal"><span class="pre">user_groups</span></code></li>
</ul>
<dl class="put">
<dt id="put--me">
<code class="descname">PUT </code><code class="descname">/me</code><a class="headerlink" href="#put--me" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Status Codes:</th><td class="field-body"><ul class="first last simple">
<li><a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.1">200 OK</a> &#8211; Everything went fine.</li>
<li><a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.2">401 Unauthorized</a> &#8211; User is not authenticated.</li>
<li><a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.4">403 Forbidden</a> &#8211; User does not have permission to change one or more fields.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="patch">
<dt id="patch--me">
<code class="descname">PATCH </code><code class="descname">/me</code><a class="headerlink" href="#patch--me" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Status Codes:</th><td class="field-body"><ul class="first last simple">
<li><a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.1">200 OK</a> &#8211; Everything went fine.</li>
<li><a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.2">401 Unauthorized</a> &#8211; User is not authenticated.</li>
<li><a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.4">403 Forbidden</a> &#8211; User does not have permission to change one or more fields.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><strong>Example Request</strong></p>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">PATCH</span> <span class="nn">/me</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">api.gooee.io</span>
<span class="na">Accept</span><span class="o">:</span> <span class="l">application/json</span>

{
    &quot;first_name&quot;: &quot;Test&quot;,
    &quot;last_name&quot;: &quot;User&quot;,
    &quot;phone_number&quot;: &quot;+1(123)456-7891&quot;,
    &quot;avatar&quot;: null,
    &quot;tags&quot;: []
}
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="retrieve-user-permissions">
<h3><a class="toc-backref" href="#id19">Retrieve User Permissions</a><a class="headerlink" href="#retrieve-user-permissions" title="Permalink to this headline">¶</a></h3>
<dl class="get">
<dt id="get--users-(id)-permissions">
<code class="descname">GET </code><code class="descname">/users/</code><span class="sig-paren">(</span><em>id</em><span class="sig-paren">)</span><code class="descname">/permissions</code><a class="headerlink" href="#get--users-(id)-permissions" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="get">
<dt id="get--me-permissions">
<code class="descname">GET </code><code class="descname">/me/permissions</code><a class="headerlink" href="#get--me-permissions" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Status Codes:</th><td class="field-body"><ul class="first last simple">
<li><a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.1">200 OK</a> &#8211; Everything went fine.</li>
<li><a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.2">401 Unauthorized</a> &#8211; User is not authenticated.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><strong>Example Response</strong></p>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">[</span>
    <span class="s2">&quot;add_action&quot;</span><span class="p">,</span>
    <span class="s2">&quot;add_device&quot;</span><span class="p">,</span>
    <span class="s2">&quot;add_rule&quot;</span><span class="p">,</span>
    <span class="s2">&quot;change_action&quot;</span><span class="p">,</span>
    <span class="s2">&quot;change_device&quot;</span><span class="p">,</span>
    <span class="s2">&quot;change_rule&quot;</span><span class="p">,</span>
    <span class="s2">&quot;delete_action&quot;</span><span class="p">,</span>
    <span class="s2">&quot;delete_device&quot;</span><span class="p">,</span>
    <span class="s2">&quot;delete_rule&quot;</span><span class="p">,</span>
<span class="p">]</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="retrieve-user-preferences">
<h3><a class="toc-backref" href="#id20">Retrieve User Preferences</a><a class="headerlink" href="#retrieve-user-preferences" title="Permalink to this headline">¶</a></h3>
<p>See <a class="reference internal" href="user_preferences.html#objects-user-preferences"><span class="std std-ref">more info</span></a> on User Preferences.</p>
<dl class="get">
<dt id="get--users-(id)-preferences">
<code class="descname">GET </code><code class="descname">/users/</code><span class="sig-paren">(</span><em>id</em><span class="sig-paren">)</span><code class="descname">/preferences</code><a class="headerlink" href="#get--users-(id)-preferences" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Status Codes:</th><td class="field-body"><ul class="first last simple">
<li><a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.1">200 OK</a> &#8211; Everything went fine.</li>
<li><a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.2">401 Unauthorized</a> &#8211; User is not authenticated.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><strong>Example Response</strong></p>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">{</span>
    <span class="nt">&quot;date_format&quot;</span><span class="p">:</span> <span class="s2">&quot;YYYY-MM-DD&quot;</span><span class="p">,</span>
    <span class="nt">&quot;number_format&quot;</span><span class="p">:</span> <span class="s2">&quot;en_US&quot;</span><span class="p">,</span>
    <span class="nt">&quot;timezone&quot;</span><span class="p">:</span> <span class="s2">&quot;UTC&quot;</span><span class="p">,</span>
    <span class="nt">&quot;use_24&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="nt">&quot;use_local&quot;</span><span class="p">:</span> <span class="kc">true</span>
<span class="p">}</span>
</pre></div>
</div>
</dd></dl>

<dl class="patch">
<dt id="patch--users-(id)-preferences">
<code class="descname">PATCH </code><code class="descname">/users/</code><span class="sig-paren">(</span><em>id</em><span class="sig-paren">)</span><code class="descname">/preferences</code><a class="headerlink" href="#patch--users-(id)-preferences" title="Permalink to this definition">¶</a></dt>
<dd><p>Patch a User&#8217;s Preferences</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Status Codes:</th><td class="field-body"><ul class="first last simple">
<li><a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.1">200 OK</a> &#8211; User Preferences patched.</li>
<li><a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.1">400 Bad Request</a> &#8211; Malformed request.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><strong>Example request</strong>:</p>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">PATCH</span> <span class="nn">/users/8238328383/preferences/</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">api.gooee.io</span>
<span class="na">Accept</span><span class="o">:</span> <span class="l">application/json</span>

{
    &quot;timezone&quot;: &quot;US/Eastern&quot;
}
</pre></div>
</div>
<p><strong>Example response</strong>:</p>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">{</span>
    <span class="nt">&quot;date_format&quot;</span><span class="p">:</span> <span class="s2">&quot;YYYY-MM-DD&quot;</span><span class="p">,</span>
    <span class="nt">&quot;number_format&quot;</span><span class="p">:</span> <span class="s2">&quot;en_US&quot;</span><span class="p">,</span>
    <span class="nt">&quot;timezone&quot;</span><span class="p">:</span> <span class="s2">&quot;US/Eastern&quot;</span><span class="p">,</span>
    <span class="nt">&quot;use_24&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="nt">&quot;use_local&quot;</span><span class="p">:</span> <span class="kc">true</span>
<span class="p">}</span>
</pre></div>
</div>
</dd></dl>

<dl class="put">
<dt id="put--users-(id)-preferences">
<code class="descname">PUT </code><code class="descname">/users/</code><span class="sig-paren">(</span><em>id</em><span class="sig-paren">)</span><code class="descname">/preferences</code><a class="headerlink" href="#put--users-(id)-preferences" title="Permalink to this definition">¶</a></dt>
<dd><p>Update a User&#8217;s Preferences</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Status Codes:</th><td class="field-body"><ul class="first last simple">
<li><a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.1">200 OK</a> &#8211; User Preferences updated.</li>
<li><a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.1">400 Bad Request</a> &#8211; Malformed request.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><strong>Example request</strong>:</p>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">PUT</span> <span class="nn">/users/8238328383/preferences/</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">api.gooee.io</span>
<span class="na">Accept</span><span class="o">:</span> <span class="l">application/json</span>

{
    &quot;date_format&quot;: &quot;YYYY-MM-DD&quot;,
    &quot;number_format&quot;: &quot;fr_FR&quot;,
    &quot;timezone&quot;: &quot;UTC&quot;,
    &quot;use_24&quot;: true,
    &quot;use_local&quot;: true
}
</pre></div>
</div>
<p><strong>Example response</strong>:</p>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">{</span>
    <span class="nt">&quot;date_format&quot;</span><span class="p">:</span> <span class="s2">&quot;YYYY-MM-DD&quot;</span><span class="p">,</span>
    <span class="nt">&quot;number_format&quot;</span><span class="p">:</span> <span class="s2">&quot;fr_FR&quot;</span><span class="p">,</span>
    <span class="nt">&quot;timezone&quot;</span><span class="p">:</span> <span class="s2">&quot;UTC&quot;</span><span class="p">,</span>
    <span class="nt">&quot;use_24&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nt">&quot;use_local&quot;</span><span class="p">:</span> <span class="kc">true</span>
<span class="p">}</span>
</pre></div>
</div>
</dd></dl>

</div>
</div>
<div class="section" id="username-change-process">
<h2><a class="toc-backref" href="#id21">Username Change Process</a><a class="headerlink" href="#username-change-process" title="Permalink to this headline">¶</a></h2>
<p>To change a user&#8217;s email address, perform a <code class="docutils literal"><span class="pre">PATCH/PUT</span></code> on their user detail record that updates the username field.
This will return a <strong>202 ACCEPTED</strong> and send a notification email to their old address that states a username change
was requested. Another email will be sent to the new address that contains a link to verify the email address.
The change will not be official until a request to <code class="docutils literal"><span class="pre">POST</span> <span class="pre">/users/update_email</span></code> endpoint is completed. This means the
user will be able to log into the system under the old username until the verification step is complete.</p>
<p>Requires the Permission <code class="docutils literal"><span class="pre">manage_partner_users</span></code> if the User is a Partner User or <code class="docutils literal"><span class="pre">manage_customer_users</span></code> if
they are a Customer User. See <a class="reference internal" href="user_groups.html#objects-user-groups"><span class="std std-ref">User Groups</span></a> for more info on Permissions.</p>
<div class="section" id="verify-a-username-email-change">
<h3><a class="toc-backref" href="#id22">Verify a username/email change</a><a class="headerlink" href="#verify-a-username-email-change" title="Permalink to this headline">¶</a></h3>
<dl class="post">
<dt id="post--users-update_email">
<code class="descname">POST </code><code class="descname">/users/update_email</code><a class="headerlink" href="#post--users-update_email" title="Permalink to this definition">¶</a></dt>
<dd><p>Verify a username change</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Status Codes:</th><td class="field-body"><ul class="first last simple">
<li><a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.1">200 OK</a> &#8211; </li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p><strong>Request Model</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="41%" />
<col width="24%" />
<col width="35%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Key</th>
<th class="head">Datatype</th>
<th class="head">Notes</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>activation_key</td>
<td>string</td>
<td>required</td>
</tr>
</tbody>
</table>
<p><strong>Example request</strong>:</p>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">POST</span> <span class="nn">/users/email_change</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">api.gooee.io</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">{</span>
  <span class="nt">&quot;activation_key&quot;</span><span class="p">:</span> <span class="s2">&quot;b942a49bf6449268230cdeff109aa13080f8f94f&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="password-recovery-processes">
<h2><a class="toc-backref" href="#id23">Password Recovery Processes</a><a class="headerlink" href="#password-recovery-processes" title="Permalink to this headline">¶</a></h2>
<p>When users want to change their password or they forgot it, they will need to send a request with their email
and we will generate an encrypted <strong>uid</strong> and a unique <strong>token</strong> for changing the password.</p>
<div class="section" id="request-a-password-change">
<h3><a class="toc-backref" href="#id24">Request a password change</a><a class="headerlink" href="#request-a-password-change" title="Permalink to this headline">¶</a></h3>
<dl class="post">
<dt id="post--users-password-request-change-">
<code class="descname">POST </code><code class="descname">/users/password/request/change/</code><a class="headerlink" href="#post--users-password-request-change-" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">Query Parameters:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><ul class="first simple">
<li><strong>mobile</strong> &#8211; one of <code class="docutils literal"><span class="pre">true</span></code>, <code class="docutils literal"><span class="pre">false</span></code> (default if not provided) indicating if the request
is made from a mobile app.</li>
<li><strong>scheme</strong> &#8211; optional url scheme that can be handled by a mobile app.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Status Codes:</th><td class="field-body"><ul class="first last simple">
<li><a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.1">200 OK</a> &#8211; </li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p><strong>Request Model</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="29%" />
<col width="29%" />
<col width="43%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Key</th>
<th class="head">Datatype</th>
<th class="head">Notes</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>username</td>
<td>string</td>
<td>required</td>
</tr>
</tbody>
</table>
<p><strong>Example request</strong>:</p>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">POST</span> <span class="nn">/users/password/request/change/</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">api.gooee.io</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">{</span>
      <span class="nt">&quot;username&quot;</span><span class="p">:</span> <span class="s2">&quot;$username&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>An email will be sent to user with a link to change the password and response will look as following:</p>
<p><strong>Example response</strong>:</p>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">{</span>
      <span class="nt">&quot;detail&quot;</span><span class="p">:</span> <span class="s2">&quot;An email was sent with instructions to reset password.&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The email will have a link like:</p>
<blockquote>
<div><a class="reference external" href="http://portal.gooee.com/#/reset-password/NzZhMWNhZWExMmQwNGJhZTg3OTdkMTgzZGFhZjI2MzA/4af-d8c43b3cf9c27349e43b">http://portal.gooee.com/#/reset-password/NzZhMWNhZWExMmQwNGJhZTg3OTdkMTgzZGFhZjI2MzA/4af-d8c43b3cf9c27349e43b</a>?mobile=false</div></blockquote>
<p>containing first the <strong>uidb64</strong> and secondly the <strong>token</strong>.</p>
<p>If <strong>mobile</strong> and <strong>scheme</strong> url parameters are supplied, the link will look like:</p>
<blockquote>
<div><a class="reference external" href="http://portal.gooee.com/#/reset-password/NzZhMWNhZWExMmQwNGJhZTg3OTdkMTgzZGFhZjI2MzA/4af-d8c43b3cf9c27349e43b">http://portal.gooee.com/#/reset-password/NzZhMWNhZWExMmQwNGJhZTg3OTdkMTgzZGFhZjI2MzA/4af-d8c43b3cf9c27349e43b</a>?mobile=true&amp;scheme=yourschemehere</div></blockquote>
</div>
<div class="section" id="changing-the-password">
<h3><a class="toc-backref" href="#id25">Changing the password</a><a class="headerlink" href="#changing-the-password" title="Permalink to this headline">¶</a></h3>
<dl class="post">
<dt id="post--users-password-change-">
<code class="descname">POST </code><code class="descname">/users/password/change/</code><a class="headerlink" href="#post--users-password-change-" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Status Codes:</th><td class="field-body"><ul class="first last simple">
<li><a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.1">200 OK</a> &#8211; </li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p><strong>Request Model</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="9%" />
<col width="74%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Key</th>
<th class="head">Datatype</th>
<th class="head">Notes</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>token</td>
<td>string</td>
<td>required</td>
</tr>
<tr class="row-odd"><td>uidb64</td>
<td>string</td>
<td>required</td>
</tr>
<tr class="row-even"><td>password</td>
<td>string</td>
<td>required, see <a class="reference internal" href="#users-complex-constraints"><span class="std std-ref">Complex Constraints</span></a></td>
</tr>
<tr class="row-odd"><td>password_confirm</td>
<td>string</td>
<td>required, see <a class="reference internal" href="#users-complex-constraints"><span class="std std-ref">Complex Constraints</span></a></td>
</tr>
</tbody>
</table>
<p><strong>Example request</strong>:</p>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">POST</span> <span class="nn">/users/password/change/</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">api.gooee.io</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">{</span>
      <span class="nt">&quot;token&quot;</span><span class="p">:</span> <span class="s2">&quot;$token&quot;</span><span class="p">,</span>
      <span class="nt">&quot;uidb64&quot;</span><span class="p">:</span> <span class="s2">&quot;$uidb64&quot;</span><span class="p">,</span>
      <span class="nt">&quot;password&quot;</span><span class="p">:</span> <span class="s2">&quot;$password&quot;</span><span class="p">,</span>
      <span class="nt">&quot;password_confirm&quot;</span><span class="p">:</span> <span class="s2">&quot;$password&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The request needs to contain the same <strong>uidb64</strong> and <strong>token</strong> from the email in the previous step to be valid.
Say the email has a link like:</p>
<blockquote>
<div><a class="reference external" href="http://portal.gooee.com/#/reset-password/NzZhMWNhZWExMmQwNGJhZTg3OTdkMTgzZGFhZjI2MzA/4af-d8c43b3cf9c27349e43b">http://portal.gooee.com/#/reset-password/NzZhMWNhZWExMmQwNGJhZTg3OTdkMTgzZGFhZjI2MzA/4af-d8c43b3cf9c27349e43b</a></div></blockquote>
<p>then the request would be</p>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">POST</span> <span class="nn">/users/password/change/</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">api.gooee.io</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">{</span>
      <span class="nt">&quot;token&quot;</span><span class="p">:</span> <span class="s2">&quot;4af-d8c43b3cf9c27349e43b&quot;</span><span class="p">,</span>
      <span class="nt">&quot;uidb64&quot;</span><span class="p">:</span> <span class="s2">&quot;NzZhMWNhZWExMmQwNGJhZTg3OTdkMTgzZGFhZjI2MzA&quot;</span><span class="p">,</span>
      <span class="nt">&quot;password&quot;</span><span class="p">:</span> <span class="s2">&quot;$password&quot;</span><span class="p">,</span>
      <span class="nt">&quot;password_confirm&quot;</span><span class="p">:</span> <span class="s2">&quot;$password&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Example responses</strong>:</p>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">{</span>
      <span class="nt">&quot;detail&quot;</span><span class="p">:</span> <span class="s2">&quot;Password has been changed successfully.&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="two-factor-authentication">
<span id="users-two-factor"></span><h2><a class="toc-backref" href="#id26">Two-Factor Authentication</a><a class="headerlink" href="#two-factor-authentication" title="Permalink to this headline">¶</a></h2>
<p>In order to enable Two-Factor Authentication, a User needs to follow these steps:</p>
<ol class="arabic simple">
<li><a class="reference internal" href="#users-two-factor-setup"><span class="std std-ref">Two-Factor Authentication setup</span></a>.</li>
<li><a class="reference internal" href="#users-two-factor-verify"><span class="std std-ref">Verify Two-Factor Authentication</span></a>.</li>
</ol>
<p>Once the two steps are completed successfully, the User will use Two-Factor Authentication as described in
<a class="reference internal" href="../general/authentication.html#general-authentication-login"><span class="std std-ref">Authentication documentation</span></a> for subsequent logins.</p>
<div class="section" id="two-factor-authentication-setup">
<span id="users-two-factor-setup"></span><h3><a class="toc-backref" href="#id27">Two-Factor Authentication Setup</a><a class="headerlink" href="#two-factor-authentication-setup" title="Permalink to this headline">¶</a></h3>
<p>To setup two-factor authentication, you need to specify a method via the <code class="docutils literal"><span class="pre">two_factor_auth_method</span></code>
post param.</p>
<dl class="post">
<dt id="post--users-(id)-two_factor-setup">
<code class="descname">POST </code><code class="descname">/users/</code><span class="sig-paren">(</span><em>id</em><span class="sig-paren">)</span><code class="descname">/two_factor/setup</code><a class="headerlink" href="#post--users-(id)-two_factor-setup" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Status Codes:</th><td class="field-body"><ul class="first last simple">
<li><a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.1">200 OK</a> &#8211; Everything went fine.</li>
<li><a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.1">400 Bad Request</a> &#8211; Malformed or invalid request</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p><strong>Request Model</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="29%" />
<col width="11%" />
<col width="60%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Key</th>
<th class="head">Datatype</th>
<th class="head">Notes</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>two_factor_auth_method</td>
<td>string</td>
<td>required (&#8216;app&#8217;, &#8216;sms&#8217;, or &#8216;email&#8217;)</td>
</tr>
<tr class="row-odd"><td>phone_number</td>
<td>string</td>
<td>required if <cite>two_factor_auth_method</cite> is &#8216;sms&#8217;</td>
</tr>
</tbody>
</table>
<p><strong>Example response for email Two-Factor Authentication method</strong>:</p>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">{</span>
      <span class="nt">&quot;detail&quot;</span><span class="p">:</span> <span class="s2">&quot;An email was sent with your authentication code to user@example.com.&quot;</span><span class="p">,</span>
      <span class="nt">&quot;setup_details&quot;</span><span class="p">:</span> <span class="p">{}</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Example response for sms Two-Factor Authentication method</strong>:</p>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">{</span>
      <span class="nt">&quot;detail&quot;</span><span class="p">:</span> <span class="s2">&quot;A SMS was sent with your authentication code to +1-202-555-0111.&quot;</span><span class="p">,</span>
      <span class="nt">&quot;setup_details&quot;</span><span class="p">:</span> <span class="p">{}</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Example response for app Two-Factor Authentication method</strong>:</p>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">{</span>
      <span class="nt">&quot;detail&quot;</span><span class="p">:</span> <span class="s2">&quot;Please setup the authenticator app (e.g Google Authenticator) on your phone.&quot;</span><span class="p">,</span>
      <span class="nt">&quot;setup_details&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;issuer&quot;</span><span class="p">:</span> <span class="s2">&quot;Gooee Cloud API&quot;</span><span class="p">,</span>
        <span class="nt">&quot;secret&quot;</span><span class="p">:</span> <span class="s2">&quot;6EBPEJDTAHL64DS5&quot;</span><span class="p">,</span>
        <span class="nt">&quot;account_name&quot;</span><span class="p">:</span> <span class="s2">&quot;user@example.com&quot;</span><span class="p">,</span>
        <span class="nt">&quot;provisioning_uri&quot;</span><span class="p">:</span> <span class="s2">&quot;otpauth://totp/user@example.com?secret=6EBPEJDTAHL64DS5&amp;issuer=Gooee%20LLC&quot;</span>
      <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">setup_details</span></code> contains the information needed to provision the app (e.g Google Authenticator or Authy) that will
be used for authentication. Details:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal"><span class="pre">issuer</span></code> is the entity that issues the token.</li>
<li><code class="docutils literal"><span class="pre">secret</span></code> is a secret code used by the app to generate the token, which should be saved secretly
by the User and never shared.</li>
<li><code class="docutils literal"><span class="pre">account_name</span></code> is the User&#8217;s account identifier, usually the email.</li>
<li><code class="docutils literal"><span class="pre">provisioning_uri</span></code> is a url built with previous values that could be encoded in a QR code and scanned by the
app to easily provision the code generation. For more information see: <a class="reference external" href="https://github.com/google/google-authenticator/wiki/Key-Uri-Format">https://github.com/google/google-authenticator/wiki/Key-Uri-Format</a>.</li>
</ul>
</div></blockquote>
<p><strong>Provisioning example ( Google Authenticator ):</strong></p>
<div class="sphinx-tabs docutils container">
<div class="ui top attached tabular menu sphinx-menu docutils container">
<div class="active item sphinx-data-tab-manual-provisioning docutils container">
Manual Provisioning</div>
<div class="item sphinx-data-tab-qr-code-provisioning docutils container">
QR code Provisioning</div>
</div>
<div class="ui bottom attached sphinx-tab tab segment sphinx-data-tab-manual-provisioning active docutils container">
<img alt="../_images/2fa_manual_provisioning.png" src="../_images/2fa_manual_provisioning.png" />
</div>
<div class="ui bottom attached sphinx-tab tab segment sphinx-data-tab-qr-code-provisioning docutils container">
<img alt="../_images/2fa_qr_provisioning.png" src="../_images/2fa_qr_provisioning.png" />
</div>
</div>
</div>
<div class="section" id="verify-two-factor-authentication">
<span id="users-two-factor-verify"></span><h3><a class="toc-backref" href="#id28">Verify Two-Factor Authentication</a><a class="headerlink" href="#verify-two-factor-authentication" title="Permalink to this headline">¶</a></h3>
<p>Now that you’ve setup your Two-Factor authentication, its time to verify it to confirm that you have
access to the device or message sent.</p>
<dl class="post">
<dt id="post--users-(id)-two_factor-verify">
<code class="descname">POST </code><code class="descname">/users/</code><span class="sig-paren">(</span><em>id</em><span class="sig-paren">)</span><code class="descname">/two_factor/verify</code><a class="headerlink" href="#post--users-(id)-two_factor-verify" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Status Codes:</th><td class="field-body"><ul class="first last simple">
<li><a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.1">200 OK</a> &#8211; Two-Factor Authentication was enabled successfully.</li>
<li><a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.1">400 Bad Request</a> &#8211; Malformed request</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p><strong>Request Model</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="58%" />
<col width="21%" />
<col width="21%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Key</th>
<th class="head">Datatype</th>
<th class="head">Notes</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>two_factor_auth_code</td>
<td>string</td>
<td>required</td>
</tr>
<tr class="row-odd"><td>two_factor_auth_method</td>
<td>string</td>
<td>required</td>
</tr>
</tbody>
</table>
<p><strong>Example request</strong>:</p>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">POST</span> <span class="nn">/users/(id)/two_factor/verify</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">api.gooee.io</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">{</span>
      <span class="nt">&quot;two_factor_auth_code&quot;</span><span class="p">:</span> <span class="s2">&quot;123456&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Example responses</strong>:</p>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">{</span>
      <span class="nt">&quot;detail&quot;</span><span class="p">:</span> <span class="s2">&quot;Two-Factor Authentication was enabled successfully.&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="two-factor-authentication-details">
<span id="users-two-factor-details"></span><h3><a class="toc-backref" href="#id29">Two-Factor Authentication Details</a><a class="headerlink" href="#two-factor-authentication-details" title="Permalink to this headline">¶</a></h3>
<p>Once Two-Factor authentication is enabled for a user, they can obtain the details of the chosen method
and configuration using this endpoint.</p>
<dl class="get">
<dt id="get--users-(id)-two_factor">
<code class="descname">GET </code><code class="descname">/users/</code><span class="sig-paren">(</span><em>id</em><span class="sig-paren">)</span><code class="descname">/two_factor</code><a class="headerlink" href="#get--users-(id)-two_factor" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Status Codes:</th><td class="field-body"><ul class="first last simple">
<li><a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.1">200 OK</a> &#8211; Everything went fine.</li>
<li><a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.1">400 Bad Request</a> &#8211; Malformed or invalid request</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p><strong>Example request</strong>:</p>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">GET</span> <span class="nn">/users/(id)/two_factor</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">api.gooee.io</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>
</pre></div>
</div>
<p><strong>Example responses</strong>:</p>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">{</span>
      <span class="nt">&quot;two_factor_auth_method&quot;</span><span class="p">:</span> <span class="s2">&quot;sms&quot;</span><span class="p">,</span>
      <span class="s2">&quot;config&quot;</span> <span class="p">{</span>
          <span class="nt">&quot;phone_number&quot;</span><span class="p">:</span> <span class="s2">&quot;+1 8131234567&quot;</span>
      <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="disable-two-factor-authentication">
<span id="users-two-factor-disable"></span><h3><a class="toc-backref" href="#id30">Disable Two-Factor Authentication</a><a class="headerlink" href="#disable-two-factor-authentication" title="Permalink to this headline">¶</a></h3>
<p>Once Two-Factor authentication is enabled, it can easily be disabled. Once disabled, users will not
require a two-factor authentication code to login.</p>
<dl class="post">
<dt id="post--users-(id)-two_factor-disable">
<code class="descname">POST </code><code class="descname">/users/</code><span class="sig-paren">(</span><em>id</em><span class="sig-paren">)</span><code class="descname">/two_factor/disable</code><a class="headerlink" href="#post--users-(id)-two_factor-disable" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Status Codes:</th><td class="field-body"><ul class="first last simple">
<li><a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.1">200 OK</a> &#8211; Everything went fine.</li>
<li><a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.1">400 Bad Request</a> &#8211; Malformed or invalid request</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p><strong>Example request</strong>:</p>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="nf">POST</span> <span class="nn">/users/(id)/two_factor/disable</span> <span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span>
<span class="na">Host</span><span class="o">:</span> <span class="l">api.gooee.io</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">{</span>
      <span class="nt">&quot;two_factor_auth_code&quot;</span><span class="p">:</span> <span class="s2">&quot;123456&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Example responses</strong>:</p>
<div class="highlight-http"><div class="highlight"><pre><span></span><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">200</span> <span class="ne">OK</span>
<span class="na">Content-Type</span><span class="o">:</span> <span class="l">application/json</span>

<span class="p">{</span>
      <span class="nt">&quot;detail&quot;</span><span class="p">:</span> <span class="s2">&quot;&#39;app&#39; two-factor authentication has been disabled on your account&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../integrations.html" class="btn btn-neutral float-right" title="Integrations" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="user_preferences.html" class="btn btn-neutral" title="User Preferences" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2021, Gooee, LLC.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: ''
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/sphinx_tabs/tabs.js"></script>
      <script type="text/javascript" src="../_static/sphinx_tabs/semantic-ui-2.2.7/tab.min.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>